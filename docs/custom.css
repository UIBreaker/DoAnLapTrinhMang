/* static/custom.css - PHIÊN BẢN ULTIMATE V2 (ICED GLASS) */

/* =========================================
   1. CẤU HÌNH CỐT LÕI & BẢNG MÀU
   ========================================= */
:root {
  /* Bảng màu Giáng Sinh Ấm Áp */
  --xmas-red: #ff6b6b;
  --xmas-green: #4ecdc4;
  --xmas-gold: #ffe66d;
  --xmas-white: #ffffff;
  --xmas-offwhite: #e0e0e0;

  /* Màu nền kính băng (Iced Glass) - Quan trọng cho độ dễ đọc */
  /* Màu đen mờ 60% + Tăng bão hòa để làm rực màu ảnh nền bên dưới */
  --glass-bg: rgba(20, 20, 20, 0.65);
  --glass-border: rgba(255, 255, 255, 0.15);
  --glass-blur: blur(16px) saturate(180%);

  /* Ghi đè màu mặc định của Theme */
  --primary: var(--xmas-red) !important;
  --secondary: var(--xmas-green) !important;
  --content: var(--xmas-offwhite) !important;
}

/* Cấu hình reset cơ bản */
html {
  scroll-behavior: smooth;
}
/* Ẩn nút chuyển đổi giao diện Sáng/Tối */
#theme-toggle {
  display: none !important;
}
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
    Arial, sans-serif;
}

/* Giữ nguyên màu code syntax highlighting */
.chroma .s,
.chroma .s1,
.chroma .s2,
.chroma .dl {
  color: #e6db74 !important;
}
.chroma .o,
.chroma .p {
  color: #f92672 !important;
}
.chroma .c,
.chroma .c1,
.chroma .ch,
.chroma .cm,
.chroma .cp,
.chroma .cs {
  color: #75715e !important;
}
.chroma .k,
.chroma .kd,
.chroma .kn,
.chroma .kp,
.chroma .kr,
.chroma .kt {
  color: #66d9ef !important;
}
.chroma .n,
.chroma .nx,
.chroma .nf {
  color: #f8f8f2 !important;
}
.chroma {
  color: #f8f8f2;
  background-color: #23241f;
  border-radius: 8px;
  border: 1px solid var(--glass-border);
}

/* =========================================
   2. HỆ THỐNG BACKGROUND KÉP (QUAN TRỌNG NHẤT)
   ========================================= */

/* Cấu hình chung cho nền */
body {
  min-height: 100vh;
  background-color: #1a1a2e; /* Màu nền tối dự phòng */
  background-attachment: fixed; /* Tạo hiệu ứng chiều sâu 3D khi cuộn */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  /* Hiệu ứng chuyển màu nền mượt mà trong 0.8 giây */
  transition: background-image 0.8s ease-in-out;
  color: var(--xmas-offwhite) !important;
}

/* --- CHẾ ĐỘ 1: TRANG CHỦ (NGOÀI TRỜI NHÌN VÀO) --- */
body.outdoor-theme {
  /* Lớp phủ đen mờ 40% lên ảnh để làm nổi nội dung */
  background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
    url("images/snow-cabin-pixel.png") !important;
}

/* --- CHẾ ĐỘ 2: TRANG BÀI VIẾT (Ở TRONG NHÀ) --- */
body.indoor-theme {
  /* Lớp phủ đen mờ 70% để tối hơn, tập trung đọc bài */
  background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
    url("images/fireplace-pixel.png") !important;
  background-position: center bottom; /* Căn lò sưởi xuống đáy */
}

/* Fix lỗi theme PaperMod */
.dark body {
  background-color: transparent !important;
}

/* =========================================
   3. HIỆU ỨNG KÍNH BĂNG (ICED GLASSMORPHISM)
   ========================================= */

/* Áp dụng cho các thẻ bài viết ở trang chủ và khung nội dung bài viết */
.post-entry,
.post-single,
.profile,
.terms-tags {
  background-color: var(--glass-bg) !important;
  backdrop-filter: var(--glass-blur); /* Làm mờ và rực màu nền phía sau */
  -webkit-backdrop-filter: var(--glass-blur); /* Hỗ trợ Safari */
  border: 1px solid var(--glass-border); /* Viền kính sáng nhẹ */
  border-radius: 16px; /* Bo góc mềm mại */
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); /* Bóng đổ tạo chiều sâu */
  padding: 25px;
  margin-bottom: 30px;
  transition: all 0.3s ease;
}

/* Hiệu ứng khi di chuột vào thẻ bài viết ở trang chủ */
.post-entry:hover {
  transform: translateY(-5px) scale(1.02); /* Nổi lên và phóng to nhẹ */
  background-color: rgba(40, 40, 40, 0.75) !important; /* Sáng hơn một chút */
  border-color: var(--xmas-green); /* Viền chuyển màu xanh */
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5), 0 0 20px rgba(78, 205, 196, 0.2); /* Glow nhẹ */
}

/* =========================================
   4. TỐI ƯU TYPOGRAPHY (DỄ ĐỌC)
   ========================================= */

/* Tiêu đề màu trắng sáng */
h1,
h2,
h3,
h4,
.entry-title,
.page-title {
  color: var(--xmas-white) !important;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5); /* Bóng chữ giúp tách biệt khỏi nền */
}

/* Nội dung bài viết */
.post-content,
.entry-content {
  color: var(--xmas-offwhite) !important;
  line-height: 1.8; /* Giãn dòng thoáng */
  font-size: 1.05rem;
}

/* Hiệu ứng Link gạch chân Gradient */
.entry-title a,
.post-content a {
  color: var(--xmas-white) !important;
  text-decoration: none;
  background-image: linear-gradient(
    to right,
    var(--xmas-red),
    var(--xmas-gold)
  );
  background-size: 0% 2px;
  background-position: 0 100%;
  background-repeat: no-repeat;
  transition: background-size 0.3s ease;
  padding-bottom: 2px;
}
.entry-title a:hover,
.post-content a:hover {
  background-size: 100% 2px;
}

/* =========================================
   5. HEADER & CÁC THÀNH PHẦN KHÁC
   ========================================= */

/* Thanh kẹo ngọt chạy (Animated Candy Cane) */
@keyframes candyFlow {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 50px 0;
  }
}
body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: repeating-linear-gradient(
    45deg,
    #ff6b6b,
    #ff6b6b 10px,
    #f7fff7 10px,
    #f7fff7 20px
  );
  background-size: 50px 50px;
  animation: candyFlow 3s linear infinite;
  z-index: 9999;
  box-shadow: 0 2px 10px rgba(255, 107, 107, 0.5);
}

/* Menu trong suốt */
.header {
  background: transparent !important;
  border: none !important;
}
.nav {
  background: transparent !important;
  backdrop-filter: none !important;
  margin-top: 15px;
}

/* Avatar xoay và phát sáng */
.profile img {
  border: 3px solid var(--xmas-red);
  box-shadow: 0 0 25px rgba(255, 107, 107, 0.6);
  transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); /* Hiệu ứng nảy */
}
.profile img:hover {
  transform: rotate(360deg) scale(1.1);
  border-color: var(--xmas-green);
  box-shadow: 0 0 40px rgba(78, 205, 196, 0.8);
}

/* Nút bấm (Buttons) */
button,
.button {
  background: rgba(78, 205, 196, 0.1) !important;
  border: 2px solid var(--xmas-green) !important;
  color: var(--xmas-green) !important;
  border-radius: 50px !important;
  font-weight: 600;
  transition: all 0.3s ease;
  backdrop-filter: blur(5px);
}
button:hover,
.button:hover {
  background: var(--xmas-green) !important;
  color: #1a1a2e !important;
  box-shadow: 0 0 20px var(--xmas-green);
  transform: translateY(-3px);
}

/* Bảng biểu (Table) */
.post-content table {
  background: rgba(0, 0, 0, 0.3);
  border-radius: 12px;
  overflow: hidden;
}
.post-content table th {
  background-color: rgba(45, 106, 79, 0.8);
  color: #fff;
}
.post-content table td,
.post-content table th {
  border-color: var(--glass-border);
}

/* =========================================
   6. ANIMATION NỘI DUNG (KHÔNG LAG)
   ========================================= */
.main {
  animation: fadeUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}
@keyframes fadeUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
